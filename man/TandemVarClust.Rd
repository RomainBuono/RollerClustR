% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/TandemVarClust.R
\name{TandemVarClust}
\alias{TandemVarClust}
\title{TandemVarClust: Tandem Clustering (MCA + HAC) for Mixed Variables}
\description{
This class implements a Tandem approach combining Multiple Correspondence Analysis
(MCA) with Hierarchical Agglomerative Clustering (HAC) to perform clustering of
modalities (rather than directly clustering variables).

The clustering operates at the modality level:
\itemize{
\item Categorical variables: each category becomes a modality
\item Quantitative variables: discretization into bins, each bin becomes a modality
}

The predict() method predicts the cluster assignment for new variables by projecting
them into the AFDM space and calculating distances to cluster centers.
}
\section{Methods}{

\describe{
\item{\code{initialize(K, n_bins, method_cah, n_factors, scale, na_action, ...)}}{
Initialize a new TandemVarClust object.
}
\item{\code{fit(X, ...)}}{
Fit the model to the data (inherited from ClusterAnalysis).
}
\item{\code{predict(new_data)}}{
Predict cluster assignment for new illustrative variables (inherited from ClusterAnalysis).
}
\item{\code{refit_with_k(new_k)}}{
Refit the clustering with a different number of clusters without re-running MCA.
}
\item{\code{get_variable_summary()}}{
Get a summary of how variables are distributed across clusters.
}
\item{\code{get_modalities_of_variable(variable_name)}}{
Get the cluster assignments for all modalities of a specific variable.
}
\item{\code{get_modalities_of_cluster(cluster_id)}}{
Get all modalities belonging to a specific cluster.
}
\item{\code{get_tree()}}{
Get the hierarchical clustering tree (hclust object).
}
\item{\code{check_results_integrity()}}{
Verify the integrity of clustering results.
}
}
}

\section{Active Bindings}{

\describe{
\item{\code{K}}{Get or set the number of clusters. Setting K will re-cut the tree.}
\item{\code{Groupes}}{Get the cluster assignments for all modalities (read-only).}
\item{\code{NbModalites}}{Get the total number of modalities (read-only).}
\item{\code{Tree}}{Get the hierarchical clustering tree (read-only).}
\item{\code{VarianceExplained}}{Get the percentage of variance explained by each factorial axis (read-only).}
\item{\code{Inertie}}{Get the total inertia from MCA (read-only).}
\item{\code{DisjunctiveTable}}{Get the disjunctive (indicator) table (read-only).}
\item{\code{FactorialCoords}}{Get the factorial coordinates of modalities (read-only).}
\item{\code{CategoricalVars}}{Get the names of categorical variables (read-only).}
\item{\code{NumericVars}}{Get the names of numeric variables (read-only).}
\item{\code{VariableClusters}}{Get the cluster assignment for each original variable (read-only).}
}
}

\examples{
\dontrun{
# Create mixed data
data <- data.frame(
  cat1 = sample(c("A", "B", "C"), 100, replace = TRUE),
  cat2 = sample(c("X", "Y"), 100, replace = TRUE),
  num1 = rnorm(100),
  num2 = runif(100, 0, 10)
)

# Fit model
model <- TandemVarClust$new(K = 3, n_bins = 4)
model$fit(data)

# Access results
print(model$Groupes)
print(model$VariableClusters)

# Get variable summary
summary <- model$get_variable_summary()

# Refit with different K
model$refit_with_k(4)

# Predict new variables
new_data <- data.frame(
  new_cat = sample(c("A", "B"), 100, replace = TRUE)
)
predictions <- model$predict(new_data)
}

}
\section{Super class}{
\code{\link[RollerClustR:ClusterAnalysis]{RollerClustR::ClusterAnalysis}} -> \code{TandemVarClust}
}
\section{Active bindings}{
\if{html}{\out{<div class="r6-active-bindings">}}
\describe{
\item{\code{K}}{Get or set the number of clusters. Setting K will re-cut the hierarchical tree.}

\item{\code{Groupes}}{Get the cluster assignments for all modalities (named integer vector).}

\item{\code{NbModalites}}{Get the total number of modalities.}

\item{\code{Tree}}{Get the hierarchical clustering tree (hclust object).}

\item{\code{VarianceExplained}}{Get the percentage of variance explained by each factorial axis.}

\item{\code{Inertie}}{Get the total inertia from MCA.}

\item{\code{DisjunctiveTable}}{Get the disjunctive (indicator) table.}

\item{\code{FactorialCoords}}{Get the factorial coordinates of modalities.}

\item{\code{CategoricalVars}}{Get the names of categorical variables.}

\item{\code{NumericVars}}{Get the names of numeric variables.}

\item{\code{VariableClusters}}{Get the cluster assignment for each original variable (based on majority rule).}
}
\if{html}{\out{</div>}}
}
\section{Methods}{
\subsection{Public methods}{
\itemize{
\item \href{#method-TandemVarClust-new}{\code{TandemVarClust$new()}}
\item \href{#method-TandemVarClust-fit}{\code{TandemVarClust$fit()}}
\item \href{#method-TandemVarClust-refit_with_k}{\code{TandemVarClust$refit_with_k()}}
\item \href{#method-TandemVarClust-get_variable_summary}{\code{TandemVarClust$get_variable_summary()}}
\item \href{#method-TandemVarClust-get_modalities_of_variable}{\code{TandemVarClust$get_modalities_of_variable()}}
\item \href{#method-TandemVarClust-get_modalities_of_cluster}{\code{TandemVarClust$get_modalities_of_cluster()}}
\item \href{#method-TandemVarClust-get_tree}{\code{TandemVarClust$get_tree()}}
\item \href{#method-TandemVarClust-check_results_integrity}{\code{TandemVarClust$check_results_integrity()}}
\item \href{#method-TandemVarClust-clone}{\code{TandemVarClust$clone()}}
}
}
\if{html}{\out{
<details open><summary>Inherited methods</summary>
<ul>
<li><span class="pkg-link" data-pkg="RollerClustR" data-topic="ClusterAnalysis" data-id="predict"><a href='../../RollerClustR/html/ClusterAnalysis.html#method-ClusterAnalysis-predict'><code>RollerClustR::ClusterAnalysis$predict()</code></a></span></li>
<li><span class="pkg-link" data-pkg="RollerClustR" data-topic="ClusterAnalysis" data-id="summary"><a href='../../RollerClustR/html/ClusterAnalysis.html#method-ClusterAnalysis-summary'><code>RollerClustR::ClusterAnalysis$summary()</code></a></span></li>
</ul>
</details>
}}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-new"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-new}{}}}
\subsection{Method \code{new()}}{
Initialize a new TandemVarClust object
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$new(
  K = 2,
  n_bins = 3,
  method_cah = "ward.D2",
  n_factors = NULL,
  scale = TRUE,
  na_action = "fail",
  ...
)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{K}}{Integer, number of clusters (must be >= 2)}

\item{\code{n_bins}}{Integer, number of bins for discretizing numeric variables (default: 3)}

\item{\code{method_cah}}{Character, linkage method for hierarchical clustering (default: "ward.D2")}

\item{\code{n_factors}}{Integer or NULL, number of factorial axes to use (default: NULL = all axes)}

\item{\code{scale}}{Logical, whether to scale numeric variables before discretization (default: TRUE)}

\item{\code{na_action}}{Character, how to handle missing values (default: "fail")}

\item{\code{...}}{Additional arguments passed to parent class}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A new TandemVarClust object
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-fit"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-fit}{}}}
\subsection{Method \code{fit()}}{
Fit the TandemVarClust model to the data

This performs the following steps:
\enumerate{
\item Prepare mixed data (identify categorical and numeric variables)
\item Build disjunctive table (indicator matrix for all modalities)
\item Perform Multiple Correspondence Analysis (MCA)
\item Cluster modalities using Hierarchical Agglomerative Clustering (HAC)
}
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$fit(X, ...)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{X}}{A data.frame containing the variables to cluster}

\item{\code{...}}{Additional arguments (not used)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Invisible self (for method chaining)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-refit_with_k"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-refit_with_k}{}}}
\subsection{Method \code{refit_with_k()}}{
Refit the clustering with a different number of clusters

This method re-cuts the hierarchical tree without re-running the MCA,
which is much faster than fitting a new model from scratch.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$refit_with_k(new_k)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{new_k}}{Integer, new number of clusters}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
Invisible self (for method chaining)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-get_variable_summary"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-get_variable_summary}{}}}
\subsection{Method \code{get_variable_summary()}}{
Get a summary of how variables are distributed across clusters

For each original variable, this method calculates:
\itemize{
\item The number of modalities
\item The principal cluster (most frequent cluster among modalities)
\item The purity (proportion of modalities in the principal cluster)
}
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$get_variable_summary()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
A data.frame with columns: variable, n_modalites, cluster_principal, purity
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-get_modalities_of_variable"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-get_modalities_of_variable}{}}}
\subsection{Method \code{get_modalities_of_variable()}}{
Get the cluster assignments for all modalities of a specific variable
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$get_modalities_of_variable(variable_name)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{variable_name}}{Character, name of the variable}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A data.frame with columns: modalite, cluster
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-get_modalities_of_cluster"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-get_modalities_of_cluster}{}}}
\subsection{Method \code{get_modalities_of_cluster()}}{
Get all modalities belonging to a specific cluster
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$get_modalities_of_cluster(cluster_id)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{cluster_id}}{Integer, cluster number (between 1 and K)}
}
\if{html}{\out{</div>}}
}
\subsection{Returns}{
A data.frame with columns: variable, modalite
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-get_tree"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-get_tree}{}}}
\subsection{Method \code{get_tree()}}{
Get the hierarchical clustering tree
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$get_tree()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
An hclust object representing the hierarchical tree
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-check_results_integrity"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-check_results_integrity}{}}}
\subsection{Method \code{check_results_integrity()}}{
Verify the integrity of clustering results

Checks for:
\itemize{
\item Empty clusters
\item Invalid modality names
}
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$check_results_integrity()}\if{html}{\out{</div>}}
}

\subsection{Returns}{
TRUE if no issues are found, FALSE otherwise (with warnings)
}
}
\if{html}{\out{<hr>}}
\if{html}{\out{<a id="method-TandemVarClust-clone"></a>}}
\if{latex}{\out{\hypertarget{method-TandemVarClust-clone}{}}}
\subsection{Method \code{clone()}}{
The objects of this class are cloneable with this method.
\subsection{Usage}{
\if{html}{\out{<div class="r">}}\preformatted{TandemVarClust$clone(deep = FALSE)}\if{html}{\out{</div>}}
}

\subsection{Arguments}{
\if{html}{\out{<div class="arguments">}}
\describe{
\item{\code{deep}}{Whether to make a deep clone.}
}
\if{html}{\out{</div>}}
}
}
}
